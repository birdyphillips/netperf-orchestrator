# NOTE: Client device IP addresses change when connected to different modems

# SERVER COMMANDS
iperf3 -s -p 5202 &
iperf3 -s -p 5205 &
iperf3 -s -p 5206 &
iperf3 -s -p 5210 &

US_Combined
iperf3 -c 71.85.92.86 -t 30 -p 5210 -P 4 -C cubic -J > US_Combined_4TCP_CL.json &
iperf3 -c 71.85.92.86 -t 30 -p 5205 -P 1 -C prague -J > US_HSI029_Combined_1TCP_LL.json &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5202 -P 1 -J > US_HSI029_Combined_1UDP_CL.json &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -J > US_HSI029_Combined_1UDP_LL.json &
wait

US_Classic_Only
iperf3 -c 71.85.92.86 -t 30 -p 5210 -P 4 -C cubic -J > US_HSI029_Classic_Only_4TCP_CL.json &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5202 -P 1 -J > US_HSI029_Classic_Only_1UDP_CL.json &
wait

US_LL_Only
iperf3 -c 71.85.92.86 -t 30 -p 5205 -P 1 -C prague -J > US_HSI029_LL_Only_1TCP_LL.json &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -J > US_HSI029_LL_Only_1UDP_LL.json &
wait

DS_Combined
iperf3 -c 96.37.176.19 -t 30 -p 5210 -P 4 -C cubic -J > DS_HSI029_Combined_4TCP_CL.json &
iperf3 -c 96.37.176.19 -t 30 -p 5205 -P 1 -C prague -J > DS_HSI029_Combined_1TCP_LL.json &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5202 -P 1 -J > DS_HSI029_Combined_1UDP_CL.json &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -J > DS_HSI029_Combined_1UDP_LL.json &
wait

DS_Classic_Only
iperf3 -c 96.37.176.19 -t 30 -p 5210 -P 4 -C cubic -J > DS_HSI029_Classic_Only_4TCP_CL.json &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5202 -P 1 -J > DS_HSI029_Classic_Only_1UDP_CL.json &
wait

DS_LL_Only
iperf3 -c 96.37.176.19 -t 30 -p 5205 -P 1 -C prague -J > DS_HSI029_LL_Only_1TCP_LL.json &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -J > DS_HSI029_LL_Only_1UDP_LL.json &
wait

# TXT OUTPUT WITH INTERVAL REPORTING

US_Combined
iperf3 -c 71.85.92.86 -t 30 -p 5210 -P 4 -C cubic -i 1 > US_HSI029_Combined_4TCP_CL_I.txt &
iperf3 -c 71.85.92.86 -t 30 -p 5205 -P 1 -C prague -i 1 > US_HSI029_Combined_1TCP_LL_I.txt &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5202 -P 1 -i 1 > US_HSI029_Combined_1UDP_CL_I.txt &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -i 1 > US_HSI029_Combined_1UDP_LL_I.txt &
wait

US_Classic_Only
iperf3 -c 71.85.92.86 -t 30 -p 5210 -P 4 -C cubic -i 1 > US_HSI029_Classic_Only_4TCP_CL_I.txt &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5202 -P 1 -i 1 > US_HSI029_Classic_Only_1UDP_CL_I.txt &
wait

US_LL_Only
iperf3 -c 71.85.92.86 -t 30 -p 5205 -P 1 -C prague -i 1 > US_HSI029_LL_Only_1TCP_LL_I.txt &
iperf3 -c 71.85.92.86 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -i 1 > US_HSI029_LL_Only_1UDP_LL_I.txt &
wait

DS_Combined
iperf3 -c 96.37.176.19 -t 30 -p 5210 -P 4 -C cubic -i 1 > DS_HSI029_Combined_4TCP_CL_I.txt &
iperf3 -c 96.37.176.19 -t 30 -p 5205 -P 1 -C prague -i 1 > DS_HSI029_Combined_1TCP_LL_I.txt &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5202 -P 1 -i 1 > DS_HSI029_Combined_1UDP_CL_I.txt &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -i 1 > DS_HSI029_Combined_1UDP_LL_I.txt &
wait

DS_Classic_Only
iperf3 -c 96.37.176.19 -t 30 -p 5210 -P 4 -C cubic -i 1 > DS_HSI029_Classic_Only_4TCP_CL_I.txt &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5202 -P 1 -i 1 > DS_HSI029_Classic_Only_1UDP_CL_I.txt &
wait

DS_LL_Only
iperf3 -c 96.37.176.19 -t 30 -p 5205 -P 1 -C prague -i 1 > DS_HSI029_LL_Only_1TCP_LL_I.txt &
iperf3 -c 96.37.176.19 -t 30 -u -b 0.82M -p 5206 -P 1 --dscp 45 -i 1 > DS_HSI029_LL_Only_1UDP_LL_I.txt &
wait

# SERVER COMMANDS
iperf3 -s -p 5202 &
iperf3 -s -p 5205 &
iperf3 -s -p 5206 &
iperf3 -s -p 5210 &

scp -r lld@71.85.92.86:/home/lld/DS_HSI029_iPerf3_Linux "C:\Users\p3135123\OneDrive - Charter Communications\Access_Engineering_Project\vCMTS_Results\vCMTS_HSI029"
scp -r lld@96.37.176.19:/home/lld/US_HSI029_iPerf3_Linux "C:\Users\p3135123\OneDrive - Charter Communications\Access_Engineering_Project\vCMTS_Results\vCMTS_HSI029"